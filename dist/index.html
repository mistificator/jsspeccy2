<!DOCTYPE html>
<html>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui, viewport-fit=cover">
	<head>
		<title>webOS JSSpeccy</title>
		<link rel="stylesheet" href="jsspeccy.css">
		<script src="jsspeccy-core.min.js"></script>
		<script src="jquery-1.7.2.min.js"></script>
		<script src="ui.js"></script>
<!-- 	<script src="js-unzip.min.js"></script>  -->
	
<!--		<script src="webOSTVjs-1.2.0/webOSTV.js" charset="utf-8"></script>
 		<script src="webOSTVjs-1.2.0/webOSTV-dev.js" charset="utf-8"></script>  
		<script type="text/javascript">
		   //sample code for calling LS2 API
	       var lunaReq = webOS.service.request("luna://com.palm.systemservice",
	        {
	            method:"clock/getTime",
	            parameters:{},
	            onSuccess: function (args) {
					console.log("UTC:", args.utc);
	            },
	            onFailure: function (args) {
	            }
	        });
		</script> -->
	
		<style>
			body {
				margin: 0;
				padding: 0;
				font-family: Helvetica, Arial, sans-serif;
				background-color: #222;
				color: #ddd;
			}
			h1, h2 {
				padding: 0; margin: 0;
			}
			a:link {
				color: #77f;
			}
			a:visited {
				color: #97f;
			}
			a:hover, a:active {
				color: #99f;
			}
		</style>
		<script>
			$(function() {
				var jsspeccy = JSSpeccy("jsspeccy-viewport", {
					"autostart": true,
					"measurePerformance": true,
                    "applyContention": false,
                    "collectOpcodesStats": false,                   
                    "cpuFpsLimit": 50
				});
				var ui = JSSpeccy.UI({
					container: "jsspeccy",
					controller: jsspeccy
				});
				ui.loadPreinstalledGames();
				$("#preinstalled-games").change(function() {
					var filename = $(this).val();
					if (filename) {
						jsspeccy.loadFromUrl(
							filename,
							{"autoload": true}
						);
					}
                    jsspeccy.setKeymap($(this).children(":selected").attr("id") || "");
				});
				$("#jsspeccy-viewport").css("margin-left", (- (Math.floor(window.screen.height / 240) * 320) / 2).toString() + "px");
				setInterval(function() {
					$(".fps").text(jsspeccy.getFps().toFixed(1));
                    $(".cfps").text(jsspeccy.getCfps().toFixed(1));	                    
				}, 1000);
			});
		</script>
	</head>
	<body>
		<div class="jsspeccy" id="jsspeccy">
            <div id="jsspeccy-fps"></div>
			<div id="jsspeccy-viewport">
				<div class= "toolbar-div">
					<ul class="toolbar">
						<li><button class="stop-start" title="Stop / start">stop / start</button></li>
						<li><button class="reset" title="Reset the Spectrum">reset</button></li>
						<li><button class="audio" title="Audio on/off">audio on/off</button></li>
						<li><button class="open" title="Open file">open file</button></li>
						<li><button class="fullscreen" title="Toggle fullscreen">fullscreen</button></li>
						<li><button class="deviceinfo" title="Show device info">device info</button></li>
						<li><button class="about" title="About webOS JSSpeccy">about</button></li>
						<li>
							<div>
								<label><input type="checkbox" class="autoload-tapes" checked="checked"> Autoload tapes</label>
							</div>
							<div>
								<select class="select-model"></select>
							</div>
							<div>
			                    <select id="preinstalled-games" style="width: 100%"></select>
	                    	</div>
						</li>
					</ul>			
				</div>				
			</div>
			<div class="panel open-file">
				<button class="close">close</button>
				<div id="load_file">
	                <h2>Load from disk: <span class="note">.tap, .tzx, .sna, .z80 files supported</span></h2><input type="file"> 
                </div> 	
				<div id="load_url">
					<h2>Load from web:</h2><input type="url"><button class="open-url">Open URL</button>
				</div>
			</div>
			<div class="panel about">
				<button class="close">close</button>
				<h1 class="commentary">webOS JSSpeccy <span class="version">v. 1.0</span></h1>
				<h2 class="commentary">a webOS ZX Spectrum emulator</h2>
				<p>Ported to LG webOS and optimized by <a href="https://twitter.com/mistificator" target="_blank">Mist Poryvaev</a></p>					
				<p>Based on <a href="https://github.com/gasman/jsspeccy2" target="_blank">JSSpeccy</a> by <a href="https://twitter.com/gasmanic">Matt Westcott</a> (<a href="https://jsspeccy.zxdemo.org/" target="_blank">official page</a>) and <a href="https://fuse-emulator.sourceforge.net/" target="_blank">Fuse</a> by Philip Kendall. Sound routines by Darren Coles. Icons from <a href="https://www.iconfinder.com/iconsets/eightyshades" target="_blank">Eightyshades</a> by Victor Erixon.</p>
				<div class="licence">
					<p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p><p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.</p><p>You should have received a copy of the GNU General Public License along with this program.  If not, see &lt;<a href="http://www.gnu.org/licenses/" target="_blank">http://www.gnu.org/licenses/</a>&gt;.</p>
				</div>
			</div>
			<div class="panel information">
				<button class="close">close</button>
				<span id="content"></span>
			</div>
		</div>
	</body>
</html>


<!DOCTYPE html>
<html>
	<meta name="viewport" content="width=device-width, user-scalable=yes"> 
	<head>
		<title>webOS JSSpeccy</title>
		<link rel="stylesheet" href="jsspeccy.css">
		<link rel="stylesheet" href="ui.css">
		<script src="jsspeccy-core.min.js"></script>
		<script src="jquery-1.7.2.min.js"></script>
		<script src="ui.js"></script>
		<script src="js-unzip.min.js"></script>
		<script src="js-inflate.min.js"></script>
	
<!--		<script src="webOSTVjs-1.2.0/webOSTV.js" charset="utf-8"></script>
 		<script src="webOSTVjs-1.2.0/webOSTV-dev.js" charset="utf-8"></script>  
		<script type="text/javascript">
		   //sample code for calling LS2 API
	       var lunaReq = webOS.service.request("luna://com.palm.systemservice",
	        {
	            method:"clock/getTime",
	            parameters:{},
	            onSuccess: function (args) {
					console.log("UTC:", args.utc);
	            },
	            onFailure: function (args) {
	            }
	        });
		</script> -->

		<script>
			$(document).ready(function() {
				var jsspeccy = JSSpeccy("jsspeccy-viewport", {
					autostart: false, // no autostart enables sound on Chrome browser
					applyContention: true, // contention makes sound and game speed NORMAL
					collectOpcodesStats: false,                   
					cpuFpsLimit: 50,
					debugPrint: true,
					panelYWidth: $(".jsspeccy .toolbar button").outerHeight() * 1.05, // wtf?
					border: 1 // default is 4
				});
				var ui = JSSpeccy.UI({
					container: "jsspeccy",
					controller: jsspeccy,
					debugPrint: true
				});
				ui.loadPreinstalledGames();            
			});
		</script>
	</head>
	<body>
		<div class="jsspeccy" id="jsspeccy">
			<div id="jsspeccy-viewport">
				<div class= "toolbar-div">
					<ul class="toolbar">
						<li><button class="stop-start" title="Stop / start">stop / start</button></li>
						<li><button class="audio" title="Audio on/off">audio on/off</button></li>
						<li><button class="open" title="Open file">open file</button></li>
						<li><button class="joystick_keys" title="Redefine joystick">redefine joystick</button></li>
						<li><button class="pokes" title="Apply pokes">apply pokes</button></li>
						<li><button class="fullscreen" title="Toggle fullscreen">fullscreen</button></li>
						<li><button class="deviceinfo" title="Show device info">device info</button></li>
						<li><button class="about" title="About webOS JSSpeccy">about</button></li>
						<li>
							<div>
								<label><input type="checkbox" class="autoload-tapes" checked="checked"> Autoload tapes</label>
							</div>
							<div>
								<select class="select-model"></select>
							</div>
							<div>
								<select id="preinstalled-games" style="width: 100%"></select>
							</div>
						</li>
						<li><button class="reset" title="Reset the Spectrum">reset</button></li>
					</ul>			
				</div>				
			</div>
            <div id="jsspeccy-fps"></div>
			<div id="typer-div"><input type="text" id="typer"></input></div>
			<div class="panel open-file">
				<button class="close">close</button>
				<div id="load_file">
					<h2>Load from disk:</h2><span class="note">TAP, TZX, SNA, Z80, ZIP files supported</span><p><input type="file" name="Tapes and snapshots" accept=".tap, .tzx, .sna, .z80, .zip"></p>
				</div> 	
				<div id="load_url">
					<h2>Load from web:</h2><input type="url"><button class="open-url">Open URL</button>
				</div>
			</div>
			<div class="panel about">
				<button class="close">close</button>
				<h1 class="commentary">webOS JSSpeccy <span class="version">v. 1.0</span></h1>
				<h2 class="commentary">a webOS ZX Spectrum emulator</h2>
				<p>Ported to LG webOS and optimized by <a href="https://twitter.com/mistificator" target="_blank">Mist Poryvaev</a></p>					
				<p>Based on <a href="https://github.com/gasman/jsspeccy2" target="_blank">JSSpeccy</a> by <a href="https://twitter.com/gasmanic">Matt Westcott</a> (<a href="https://jsspeccy.zxdemo.org/" target="_blank">official page</a>) and <a href="https://fuse-emulator.sourceforge.net/" target="_blank">Fuse</a> by Philip Kendall. Sound routines by Darren Coles. Icons from <a href="https://www.iconfinder.com/iconsets/eightyshades" target="_blank">Eightyshades</a> by Victor Erixon.</p>
				<div class="licence">
					<p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p><p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.</p><p>You should have received a copy of the GNU General Public License along with this program.  If not, see &lt;<a href="http://www.gnu.org/licenses/" target="_blank">http://www.gnu.org/licenses/</a>&gt;.</p>
				</div>
			</div>
			<div class="panel information">
				<button class="close">close</button>
				<span id="content"></span>
			</div>  
				<div id='pad_block1' class='padblock'>
						<table width='100%' border='0' cellpadding='6' cellspacing='0'>
								<tr>
										<td width='100%' align='left'>
												<button class='pad_up_down' onmousedown="$.padTouch('select_key_up',this)" onmouseup="$.padUntouch('select_key_up',this)" ontouchstart="$.padTouch('select_key_up',this)" ontouchend="$.padUntouch('select_key_up',this)">&uarr;</button>
												<br />
												<button class='pad_left_right' onmousedown="$.padTouch('select_key_left',this)" onmouseup="$.padUntouch('select_key_left',this)" ontouchstart="$.padTouch('select_key_left',this)" ontouchend="$.padUntouch('select_key_left',this)">&larr;</button>
												<button class='pad_left_right' onmousedown="$.padTouch('select_key_right',this)" onmouseup="$.padUntouch('select_key_right',this)" ontouchstart="$.padTouch('select_key_right',this)" ontouchend="$.padUntouch('select_key_right',this)">&rarr;</button>
												<br />
												<button class='pad_up_down' onmousedown="$.padTouch('select_key_down',this)" onmouseup="$.padUntouch('select_key_down',this)" ontouchstart="$.padTouch('select_key_down',this)" ontouchend="$.padUntouch('select_key_down',this)">&darr;</button>
										</td>
								</tr>
						</table>
				</div>          
				<div id='pad_block2' class='padblock'>    
						<table width='100%' border='0' cellpadding='6' cellspacing='0'>
								<tr>
										<td width='50%' align='right'>
												<p>&nbsp;<p>
												<button class='pad_action' onmousedown="$.padTouch('select_key_action',this)" onmouseup="$.padUntouch('select_key_action',this)" ontouchstart="$.padTouch('select_key_action',this)" ontouchend="$.padUntouch('select_key_action',this)">B</button>
										</td>
										<td width='50%' align='right' valign='bottom'>
												<button class='pad_fire' onmousedown="$.padTouch('select_key_fire',this)" onmouseup="$.padUntouch('select_key_fire',this)" ontouchstart="$.padTouch('select_key_fire',this)" ontouchend="$.padUntouch('select_key_fire',this)">A</button>
												<p>&nbsp;<p>
										</td>
								</tr>
						</table>
				</div>  
				<div id='joystick_keys' class="panel joystick_keys">
						<button class="close">close</button>
						<br/>
						<p>Redefine joystick</p>
						<select id="selcontrol" onchange="$.setJoystick(document.getElementById('selcontrol').value)">
								<option value="&#x2191;,&#x2193;,&#x2190;,&#x2192;,0,Enter" selected="">CURSOR</option>
								<option value="Q,A,O,P,M,Q">Q,A,O,P,M</option>                    
								<option value="Q,A,O,P,M,Space">Q,A,O,P,M,Space</option>                    
								<option value="N,M,Z,X,Symbol Shift,N">N,M,Z,X,Symbol</option>                    
								<option value="7,6,5,8,0,7">PROTEK</option>
								<option value="4,3,1,2,5,4">INTERFACE 1</option>                  
								<option value="9,8,6,7,0,9">INTERFACE 2</option>
						</select>                
						<ul>
								<li>  
										<div><label for='select_key_up'>&uarr;</label><select id='select_key_up' class="selcontrol_options"></select></div>
								</li>
								<li>          
										<div><label for='select_key_down'>&darr;</label><select id='select_key_down' class="selcontrol_options"></select></div>
								</li>
								<li>
										<div><label for='select_key_left'>&larr;</label><select id='select_key_left' class="selcontrol_options"></select></div>
								</li>
								<li>                   
										<div><label for='select_key_right'>&rarr;</label><select id='select_key_right' class="selcontrol_options"></select></div>
								</li>
								<li>
										<div><label for='select_key_fire'>A</label><select id='select_key_fire' class="selcontrol_options"></select></div>
								</li>
								<li>
										<div><label for='select_key_fire'>B</label><select id='select_key_action' class="selcontrol_options"></select></div>
								</li>
						</ul>
				</div>   
				<div id='pokes' class="panel pokes">
						<button class="close">close</button>
						<br/>
						<p>Apply pokes</p>
						<span class="note">Format is &quot;address1,value1:address2,value2:...&quot;</span>
						<p><input type="text"></input><button class="apply_pokes">Poke</button></p>
						<span class="note" id="error_text"></span>
						<textarea rows=40 cols=40 class="note" readonly></textarea>
				</div>  		
		</div>
	</body>
</html>


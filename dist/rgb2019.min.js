function Rgb2019(){var t={cors_proxy:"https://non-cors.herokuapp.com/",rgb2019_base:"https://rgb.yandex/"};t.getLinks=async function(){var e,n=await(e=t.cors_proxy+t.rgb2019_base,new Promise((t,n)=>{const o=new XMLHttpRequest;o.open("GET",e),o.onload=function(){200==o.status?t(o.responseText):n(o.responseStatus)},o.onerror=function(){n(o.responseStatus)},o.send()})),o=$.parseHTML(n),r=[];return $("div.game__card",o).each((function(e,n){var o=e+1+"."+$("h4",n).text().trim(),a=$("a:first",n).attr("href");o&&a&&(a=t.cors_proxy+t.rgb2019_base+a,r.push({title:o,tape_url:a}))})),new Promise(t=>{t(r)})};var e=!1;return t.init=function(n,o,r,a){var i=$(n+" option").length;$(n).append($("<option></option>").text("RGB - Yandex Retro Games Battle 2019")),$(n).change((function(){switch(e=!1,$(n+" option:selected").index()-i){case 0:e=!0,$(o).empty();var a=$("<option></option>");a.text("-"),$(o).append(a),$(r).empty(),t.getLinks().then((function(t){for(var e of t){var n=$("<option></option>");n.text(e.title),n.attr("href",e.tape_url),$(r).append(n)}$(r).trigger("change")}))}})),$(r).change((function(){if(e){$(a).empty();var t=$(r+" option:selected").attr("href"),n=$("<option></option>");n.text(t.slice(t.lastIndexOf("/")+1)),n.attr("href",t),$(a).append(n),$(a).trigger("change")}})),0==i&&$(n).trigger("change")},t}
